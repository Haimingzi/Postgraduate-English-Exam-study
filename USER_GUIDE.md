# 用户登录和数据同步功能使用指南

## 功能概述

现在应用支持用户登录和云端数据同步功能，您的历史记录和单词缓存将自动保存到云端，可在多设备间共享。

## 配置步骤

### 1. 注册 Supabase 账号

1. 访问 https://supabase.com/
2. 点击 "Start your project" 注册账号
3. 创建新项目（选择离你最近的区域，如 Singapore）
4. 等待项目初始化完成（约 2 分钟）

### 2. 获取 API 凭证

1. 在 Supabase 项目页面，点击左侧菜单的 **Settings** (齿轮图标)
2. 选择 **API**
3. 复制以下信息：
   - **Project URL** (例如: `https://xxxxx.supabase.co`)
   - **anon public** key (一长串字符)

### 3. 创建数据库表

1. 在 Supabase 项目页面，点击左侧菜单的 **SQL Editor**
2. 点击 **New query**
3. 复制 `SUPABASE_SETUP.md` 文件中的 SQL 代码
4. 粘贴到编辑器中
5. 点击 **Run** 执行

### 4. 配置环境变量

#### 本地开发

在项目根目录创建 `.env.local` 文件：

```env
NEXT_PUBLIC_SUPABASE_URL=你的_Project_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=你的_anon_public_key
DEEPSEEK_API_KEY=你的_DeepSeek_API_Key
```

#### Vercel 部署

1. 登录 Vercel Dashboard
2. 进入你的项目
3. 点击 **Settings** → **Environment Variables**
4. 添加以下变量：
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `DEEPSEEK_API_KEY`
5. 点击 **Save**
6. 重新部署项目（Deployments → 最新部署 → ⋯ → Redeploy）

## 使用说明

### 注册账号

1. 打开应用
2. 点击右上角 **登录/注册** 按钮
3. 选择 **注册**
4. 输入邮箱和密码（至少 6 个字符）
5. 点击 **注册**
6. 检查邮箱，点击验证链接
7. 返回应用，使用邮箱和密码登录

### 登录

1. 点击右上角 **登录/注册** 按钮
2. 输入邮箱和密码
3. 点击 **登录**

### 数据同步

登录后：
- ✅ 生成的历史记录自动保存到云端
- ✅ 查询的单词自动缓存到云端
- ✅ 在其他设备登录同一账号，数据自动同步
- ✅ 历史记录和单词缓存永久保存

未登录时：
- ⚠️ 数据仅保存在本地浏览器
- ⚠️ 清除浏览器数据会丢失
- ⚠️ 无法跨设备同步

### 退出登录

点击右上角的 **退出** 按钮

## 注意事项

1. **邮箱验证**：注册后必须验证邮箱才能登录
2. **密码安全**：密码至少 6 个字符，建议使用强密码
3. **数据隐私**：每个用户只能访问自己的数据（行级安全策略保护）
4. **免费额度**：Supabase 免费版足够个人使用
   - 500MB 数据库存储
   - 50,000 月活跃用户
   - 2GB 文件存储

## 常见问题

### Q: 注册后收不到验证邮件？
A: 检查垃圾邮件文件夹，或使用其他邮箱重试

### Q: 登录后数据没有同步？
A: 确保 Vercel 环境变量配置正确，并重新部署

### Q: 可以删除云端数据吗？
A: 可以，在历史记录中删除单条记录，或点击"清空"删除所有记录

### Q: 忘记密码怎么办？
A: 目前需要重新注册，后续可以添加密码重置功能

## 技术支持

如有问题，请检查：
1. Supabase 项目是否正常运行
2. 环境变量是否配置正确
3. 数据库表是否创建成功
4. 浏览器控制台是否有错误信息


